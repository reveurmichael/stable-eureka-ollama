def compute_reward(self, pos, action, state):
    reward = -0.1  # penalty for not moving forward
    individual_reward = {}
    
    if not self.game_over and (pos[0] > 0 or abs(vel.x) < 0.05):  
        # If the biped is already at the end of the terrain, or has almost no velocity to the right
        reward += 1.0  # reward for reaching the end of the terrain
    
    if not self.game_over and pos[0] > (TERRAIN_LENGTH - TERRAIN_GRASS) * TERRAIN_STEP:
        reward += 5.0  # large reward for being close to the end of the terrain
    
    individual_reward['reaching_end'] = reward
    return reward, individual_reward