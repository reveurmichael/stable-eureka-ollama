def compute_reward(self, pos, action, state):
    hull_height = pos[1]
    terminal_state = pos[0] > (TERRAIN_LENGTH - TERRAIN_GRASS) * TERRAIN_STEP
    reward = 0.0
    
    if terminal_state:
        reward += 10.0  # bonus for reaching the end
    elif hull_height < 0.5:  # penalty for falling down
        reward -= 1.0
    
    if action[2] > 0 and action[3] > 0:  # walking forward with both legs
        reward += 0.1  # bonus for movement

    return reward, {'end_reached': terminal_state, 'fell_down': hull_height < 0.5, 'walking_forward': action[2] > 0 and action[3] > 0}