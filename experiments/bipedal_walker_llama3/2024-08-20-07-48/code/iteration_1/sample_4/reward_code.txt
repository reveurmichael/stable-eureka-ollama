def compute_reward(self, pos, action, state):
    distance_to_goal = TERRAIN_LENGTH - pos[0]
    
    if self.game_over or pos[0] < 0:
        return -100.0, {"terminal": True}
    elif pos[0] > (TERRAIN_LENGTH - TERRAIN_GRASS) * TERRAIN_STEP:
        return 100.0, {"success": True}
    
    # Encourage movement towards the goal
    distance_reward = distance_to_goal / TERRAIN_LENGTH
    
    # Penalize straying into danger zone
    if state[-1]:  # assume this is the "danger" state
        distance_reward -= 5.0
    
    # Reward staying within safe zone (grassy area)
    if pos[0] > (TERRAIN_LENGTH - TERRAIN_GRASS) * TERRAIN_STEP:
        distance_reward += 2.0
    
    return distance_reward, {"distance_reward": distance_reward}